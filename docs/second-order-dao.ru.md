# UTBC+POL — Спецификация Second-Order DAO (POLDAO)

**Статус:** Проект — прогрессивный, готов к внедрению.

Предназначен как единый исходник для запуска и операционного управления вторичными UTBC+POL DAO («POLDAO»), а также описывает взаимодействие на уровне экосистемы при участии казны парачейна (Drip Vault, паттерн BLDR).

---

## Резюме

**POLDAO** — это DAO второго порядка, выпускающее собственный токен (SODT) по любой кривой эмиссии. Для получения сертификации в экосистеме необходимо зафиксировать неизменяемую **Protocol-Owned Liquidity (POL)** в паре с токеном парачейна **Native**. Когда казна парачейна участвует — через разовую покупку, поток Drip Vault или циклы buyback, — ее доля становится устойчивым уровнем соподчинения вместо классических тимшеров. Спецификация фиксирует минимальные инварианты и прогрессивные паттерны, которые позволяют:

- безопасно запускать ликвидность, не допуская утечек POL;
- наследовать безопасность первого порядка через прокси-аппрувы Native и мультипликаторы голосов казны;
- организовывать платежи по схеме BLDR (payroll/invoice) с минимальным UX-трением;
- исследовать разные ветви роста (экосистемный BLDR-хаб, распределенные Contributor Mesh, открытый рынок выпусков), сохраняя для атакующих неприемлемо высокую стоимость захвата управления.

Документ опирается на прагматичные примитивы: супермаджорити + timelock + окна вето для критических действий, отсутствие soulbound-советов, отсутствие искусственных потолков на траты, а также включает опциональные расширения, в которые можно войти уже на старте.

---

## Содержание

1. Термины и участники
2. Базовые инварианты (обязательные требования)
3. Жизненный цикл POLDAO (создание → эмиссия → наращивание POL)
4. Режимы участия казны (разовая покупка, Drip Vault, buyback)
5. Примитивы управления (Native proxy, мультипликаторы, voting escrow)
6. Паттерн BLDR — процессы payroll & invoice
7. Перспективные ветви развития
8. Модель безопасности: векторы атак и защитные механизмы
9. Политики и рекомендованные параметры
10. Заметки по реализации (паллета Substrate и хуки)
11. Дорожная карта развертывания
12. Открытые варианты и расширения

---

## 1. Термины и участники

- **Native** — базовый токен парачейна (актив первого порядка), управляется референдумами первого порядка.
- **DAO** — децентрализованная автономная организация в широком смысле: любое сообщество, координирующееся через ончейн-правила.
- **SODAO** — DAO второго порядка, надстроенное над экосистемным Native DAO. Оно может запускаться или даже делегировать управление участникам Native, сохраняя при этом возможность привязывать голосование к любому выбранному токену.
- **POLDAO** — частный случай SODAO, обязанный поддерживать ликвидность, принадлежащую протоколу, в паре с Native, так что ликвидность остается заблокированной, пока говернанс явно не изменит статус.
- **UTBC** — однонаправленная функция печати, зависящая от суммарного предложения и параметров формулы. Она никогда не сжигает токены; вместо этого может чеканить резервы в сторонних активах, которые команды гибко перенаправляют, например на поддержание ликвидности.
- **POL** — ликвидность, принадлежащая протоколу, которая может хранить LP-токены в существующих пулах или выступать независимым источником ликвидности AMM. Ключевое свойство — постоянство: ликвидность нельзя отозвать в одностороннем порядке; даже LP в казне де-факто заблокированы, пока говернанс не изменит статус-кво, что ведет к репутационным издержкам.
- **UTBC+POL** — связка, где кривая UTBC печатает токены и одновременно направляет резервный Foreign актив в POL против Native, поддерживая спрос на базовый актив.
- **UTBC+POL SODAO** — еще более специализированная конфигурация SODAO с настраиваемой кривой, использующей Native как резерв, чеканящей `SODT`, направляющей часть эмиссии в POLDAO и управляемой через `SODT`, при этом `SODT` в казне Native допускают двуфакторное голосование через Native.
- **SODT** — общий токен SODAO. Может чеканиться через UTBC+POL или иметь кастомные механизмы эмиссии и сжигания, заданные DAO.
- **Drip Vault** — инструмент казны первого порядка: абстракция хранилища-аккаунта с временной характеристикой. Такие хранилища можно пополнять, после чего они исполняют последовательности конверсий или действий во времени, подобно экономическим конденсаторам. Drip Vault может проводить сделки по принципу DCA, планировать отложенные переводы, выступать токен-локером или модулем других элементов токеномики. Например, казну можно настроить так, чтобы Drip Vault за месяц обменял весь выделенный Native на BLDR и вернул BLDR обратно в казну. Управление конкретным Drip Vault можно привязать к токену DAO или сделать хранилище неизменяемым; если баланс падает ниже existential deposit, Drip Vault самоуничтожается.
- **vSODT** — опциональный voting escrow, где SODT замораживается («кубится») для голосования; используется в основном агрегатором казны.
- **Treasury proxy account** — мульти-сиг или runtime-аккаунт казны первого порядка, который блокирует SODT и раскрывает голосование Native через прокси-механику.
- **BLDR** — канонический пример builder-токена: экосистемный POLDAO для payroll, инвойсов и грантов.

---

## 2. Базовые инварианты (обязательные требования)

Каждое POLDAO, претендующее на сертификацию в экосистеме, ДОЛЖНО обеспечить эти инварианты на уровне цепочки:

1. **Неизменяемость POL** — LP-токены, помеченные как POL, не могут быть выведены, пока предложение не пройдет (a) супермаджорити голосов POLDAO, (b) обязательный timelock и (c) окно вето, в течение которого голосующие через Native proxy могут отклонить операцию.
2. **Фундаментная ликвидность в Native** — запуск требует депозита ликвидности, принадлежащей протоколу, в пул SODT/Native, где доля Native превышает установленный говернансом порог. Это изначальное парное размещение делает запуск POLDAO функционально равнозначным запуску экосистемного токена и гарантирует базовый спрос на утилити Native.
3. **Mint-to-treasury cap** — после любой эмиссии циркулирующее пользовательское предложение должно удовлетворять условию
   ```
   circulating_user ≤ cap_factor × treasury_locked
   ```
   где `treasury_locked` — объем SODT, удерживаемый казной экосистемы (включая Drip Vault-коммитменты). Значение `cap_factor` по умолчанию — `0.99`. Это гарантирует, что казна всегда может перебить чисто рыночного «кита».
4. **Опциональность командной доли** — POLDAO, запускаемые в рамках экосистемы, МОГУТ установить `team_share = 0`. Тогда вес управления исходит только от SODT, удерживаемого казной и усиленного через Native proxy голосование (§5). Если командная доля > 0, требуется вестинг ≥ 5 лет и невозможность обхода cap-pроверок.
5. **Гейт для критических действий** — вывод POL, изменение параметров bonding curve или крупные траты из казны DAO требуют двустороннего аппрува: супермаджорити POLDAO **и** подтверждения Native proxy в окне вето.
6. **Телеметрия** — глубина POL, балансы казны, заявки на эмиссию и показатели голосования Native proxy должны эмититься ончейн каждый блок, чтобы независимые мониторы фиксировали аномалии.

Остальные параметры настраиваются для каждой DAO.

---

## 3. Жизненный цикл POLDAO

1. **Регистрация** — инициатор подает параметры кривой эмиссии, распределения долей (`user / pol / treasury / team`), желаемый cap factor (≤ глобального максимума), overlay fee, схему управления (Native-only, смешанная или SODT-only), а также предпочтения по Drip Vault (если есть). Автоматические проверки следят за суммой долей (100%) и соответствием cap factor системным ограничениям.
2. **Стартовая эмиссия** — одобренный инициатор вносит как минимум `Native_min_deposit`. Первый mint направляет `pol_share` в XYK-пул (SODT/Native) и помечает LP-токены как POL; вклад Native обязан превышать говернанс-установленный порог ликвидности, чтобы запуск сразу поддерживал спрос на утилити Native. SODT, предназначенный казне, зачисляется напрямую на казначейский счет.
3. **Настройка Native proxy** — если DAO выбирает управление через Native (типично для запусков уровня экосистемы по типу BLDR), казначейский proxy стейкает чеканенный SODT и раскрывает голоса через референдумы Native. Иначе управление может осуществляться напрямую держателями SODT через vSODT или жидкие голосования.
4. **Операционная фаза** — дополнительные эмиссии могут инициировать пользователи или казна. Каждая эмиссия проходит cap-проверку и автоматически увеличивает POL. Предложения POLDAO охватывают расходы, корректировки комиссий и, при необходимости, buyback.
5. **Градуация** — когда DAO длительное время поддерживает положительный денежный поток и здоровую глубину POL, казна может снизить мультипликатор или частоту Drip Vault через референдум Native.

---

## 4. Режимы участия казны

### 4.1 Разовая покупка (one-shot seed)

Казна обменивает объем Native на SODT через bonding curve или на рынке. Результат: казна удерживает SODT (пользовательскую долю), а POL мгновенно углубляется. Подходит для быстрого запуска BLDR или стратегических токенов.

### 4.2 Поток Drip Vault (рекомендуется)

Периодическая конвертация Native в SODT с параметрами:

| Параметр            | Пример            | Комментарии                                   |
| ------------------- | ----------------- | --------------------------------------------- |
| `tranche_size`      | 0.1% казны/неделя | настраивается для каждой DAO                  |
| `cap_factor_guard`  | 0.95              | Drip Vault останавливается при нарушении cap  |
| `pol_route_percent` | ≥ pol_share       | гарантирует постоянный рост POL               |
| `treasury_route`    | остаток           | идет на казначейский proxy с мультипликатором |

Планирование Drip Vault создает долгосрочный спрос и дает пользователям прогноз по ликвидности.

### 4.3 Buyback / recycle

Казна выкупает SODT, когда цена XYK опускается ниже bonding curve, после чего:

- повторно блокирует токены в казначейском proxy (усиливая вес управления);
- перепродает позже для финансирования новых грантов;
- направляет в другие SODAO как стратегический коллатераль.

---

## 5. Примитивы управления

### 5.1 Подтверждение через Native proxy (двухфакторное)

Для критических предложений исполнение требует:

1. Супермаджорити голосов внутри POLDAO (вес определяется выбранной схемой управления SODT).
2. Референдума Native (или делегированного vNative-голоса), подтверждающего предложение в пределах окна вето.

Если Native отклоняет предложение, оно автоматически отменяется. Это позволяет наследовать безопасность первого порядка без советов.

### 5.2 Мультипликатор казны и вес proxy

- SODT, удерживаемый казной и заблокированный на proxy-аккаунте, получает настраиваемый мультипликатор `m` (по умолчанию 3). Изменить `m` можно только через двойной аппрув (референдум Native + супермаджорити POLDAO).
- Если пользователи не могут на чеканить более 99% от объема SODT, удерживаемого казной, вес казны всегда доминирует и обеспечивает право вето.

### 5.3 Опциональный voting escrow vSODT («cube»)

- POLDAO может включить простой депозитный контракт: SODT → vSODT (неликвидный) с коротким периодом разморозки (24–48 часов). Это мягко защищает от flash-mint голосования. Функция опциональна и может быть отключена при Native-only управлении.

### 5.4 Схемы управления

При запуске POLDAO выбирает одну из трех схем:

1. **Native-only** — все предложения управляются исключительно через Native proxy; SODT предоставляет только экономические права. Подходит для экосистемных запусков POLDAO с нулевой командной долей.
2. **Смешанная (Hybrid)** — держатели SODT голосуют первыми; Native сохраняет вето через подтверждение во временном окне. Значение по умолчанию для BLDR.
3. **SODT-only** — DAO, управляемые сообществом, с собственной моделью безопасности; могут использовать казначейский мультипликатор, если казна участвует.

### 5.5 Фрактальное управление и трилемма

- **Широкое × экспертное × быстрое** — устойчивое управление должно одновременно сохранять легитимность, компетентность и оперативность. Классические рецепты (советы, чистая делегация, квадратичное голосование) обычно покрывают лишь две цели, скатываясь в централизацию или бюрократию.
- **Разделение слоев** — UTBC+POL SODAO разводят стратегический и операционный уровни: Native DAO задаёт макро-решения, удерживает вето и мультипликаторы казны, а SODAO реализует задачи с предметной экспертизой и skin-in-the-game через SODT.
- **Экономическое сцепление** — неизменяемый POL, парность с Native, cap-factor и proxy-мультипликатор не дают операционному слою отклониться: автономия уравновешивается структурным спросом на Native и финальным вето Native.
- **Качество без бюрократии** — экспертная ревью происходит там, где концентрируется SODT, при этом критические действия всё равно проходят через окно вето Native, решая трилемму без теневых советов.

---

## 6. Паттерн BLDR — payroll и invoice потоки

1. **Funding** — казна запускает BLDR через разовую покупку или развертывание Drip Vault. `team_share = 0`, `treasury_share` аккумулирует BLDR внутри DAO.
2. **Assignments** — участники подают инвойсы (hash + метаданные). BLDR DAO открывает голосование; циркуляция BLDR может оставаться ликвидной, без тяжелых escrow.
3. **Approval** — держатели BLDR голосуют; мультипликатор казны обеспечивает выравнивание. Если выплата включает Native из казны, референдум Native подтверждает ее в окне вето.
4. **Execution** — при одобрении BLDR DAO выплачивает BLDR (или меняет на Native через XYK). Все платежи ончейн и с привязкой к задачам/PR.
5. **Recycling** — казна может периодически продавать часть BLDR, пополняя резервы Native и сохраняя runway.

Паттерн делает payroll прозрачным, обеспечивая при этом право вето без выделения командных долей.

### 6.1 Скорость решений и петли обратной связи

- **Рост пропускной способности** — Native DAO однажды инициирует BLDR (≈28 дней), тогда как инвойсы BLDR закрываются примерно за 3 дня, резко увеличивая число финансируемых потоков без перегрузки голосующих первого порядка.
- **Петля A — POL flywheel**: финансирование казной → углубление POL → ниже проскальзывание → контрибьюторы держат дольше → мягче давление продаж → крепче пол → увереннее эмиссия.
- **Петля B — Репутационное накопление**: стабильные поставки повышают репутацию контрибьютора, усиливая будущий голос и продвигая меритократический приоритет задач.
- **Петля C — Рыночное выявление**: конкурирующие инвойсы выявляют настоящие приоритеты; ценовые сигналы заменяют централизованные роадмапы, а вето Native остаётся страховкой от мисалаймента.

---

## 7. Перспективные ветви развития

| Ветвь                  | Описание                                                                                                     | Сильные стороны                                                       | Защитные механизмы                                       |
| ---------------------- | ------------------------------------------------------------------------------------------------------------ | --------------------------------------------------------------------- | -------------------------------------------------------- |
| **BLDR Hub**           | Единственное DAO BLDR ведет payroll для всех билдеров.                                                       | Простой UX, выравнивание с казной, сильное вето через мультипликатор. | Native-only управление или hybrid с `cap_factor = 0.99`. |
| **Contributor Mesh**   | Каждая команда запускает собственное POLDAO; BLDR DAO выдаёт BLDR как гранты, а команды чеканят свои токены. | Высокая экспериментальность, естественный отбор кривых и долей.       | Смешанное управление, BLDR как резервный актив у команд. |
| **Open Market POLDAO** | Сообщество запускает SODT с кастомными кривыми; казна участвует при необходимости.                           | Разнообразная токеномика, спекуляция с защитными механизмами.         | Cap factor и Native-вeto не дают захватить ресурсы базы. |

Все ветви полагаются на одинаковые инварианты и могут сосуществовать.

### Специализация и фрактальное масштабирование

- **Доменные SODAO** — BLDR направляет ресурсы в специализированные операционные DAO (runtime, инфраструктура, UX, документация). Каждый запускает свой UTBC+POL токен к Native, позволяя предметным экспертам управлять целевыми бэклогами.
- **Проектные SODAO** — отдельные инициативы (DEX, wallet, bridge) создают автономные SODAO с ограниченным бюджетом и milestone-эмиссией, ограничивая downside при сохранении upside за счёт пола POL.
- **Governance DAG** — экосистема строится как направленный ациклический граф: ресурсы спускаются вниз, телеметрия и ответственность поднимаются вверх, а кросс-SODAO платежи (сервисы, revenue sharing) углубляют взаимные POL и полезность.
- **Расширение пропускной способности** — распределение решений по специализированным слоям увеличивает общую ёмкость с единичных референдумов до сотен информированных апрувов без потери качества.

---

## 8. Модель безопасности: векторы атак и защита

| Вектор                      | Описание                                           | Митигирующие меры                                                                                                                |
| --------------------------- | -------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------- |
| **Mint-whale capture**      | Атакующий чеканит много SODT, чтобы обогнать казну | Cap factor (≤ 99%), мультипликатор казны, вето Native.                                                                           |
| **Flash governance**        | Атакующий чеканит, голосует и выводит мгновенно    | Опциональный vSODT cooldown или Native-only управление.                                                                          |
| **Native takeover**         | Атакующий покупает Native для утверждения атаки    | Timelock + прозрачная очередь → сообщество успевает отреагировать; референдумы требуют широкого кворума.                         |
| **Drip Vault exploitation** | Атакующий фронтранит расписание Drip Vault         | Небольшие транши, публичное расписание, опциональная рандомизация.                                                               |
| **Treasury drain**          | Ошибка в конфигурации опустошает казну DAO         | Траты не ограничены искусственно, но полностью прозрачны; сообщество может наложить вето через Native; рекомендованы KPI-аудиты. |

Аппроксимация стоимости атаки:

```
Required vSODT = m × treasury_locked − existing_user_votes + 1
Native cost ≈ Required vSODT × XYK_price (плюс проскальзывание)
```

При `m = 3` и значительной доле казны стоимость атаки выходит за пределы экономической целесообразности.

---

## 9. Политики и рекомендованные параметры

| Параметр                  | Значение по умолчанию        | Если занизить                               | Если завысить                                              |
| ------------------------- | ---------------------------- | ------------------------------------------- | ---------------------------------------------------------- |
| `cap_factor`              | 0.99                         | Казна не может перебить захват → риск атаки | Пользовательская эмиссия ограничена → дефицит ликвидности  |
| `timelock_critical`       | 14 дней                      | Спешное исполнение, меньше проверки         | Задержки релизов, операционный тормоз                      |
| `veto_window`             | 7 дней                       | Недостаточно времени на реакцию сообщества  | Затягивание исполнения, неудовлетворённость контрибьюторов |
| `treasury_multiplier` `m` | 3×                           | Ослабленное право вето                      | Избыточная централизация                                   |
| `pol_share`               | 35–45%                       | Ослабление ценового пола                    | Чрезмерная заморозка капитала                              |
| `treasury_share`          | 25–35%                       | Недофинансированные операции                | Доминирование казны, низкий флоат                          |
| `user_share`              | Остаток                      | Низкая ликвидность флоата                   | Высокая волатильность от избыточного флоата                |
| `team_share`              | 0% (для запусков экосистемы) | Нет явных стимулов команды                  | Восприятие ренты                                           |

Overlay fee, форма кривой и параметры Drip Vault выбираются на старте и могут корректироваться через предложения с двойным аппрувом.

---

## 10. Реализация (Substrate паллеты и хуки)

- `pallet_poldao_registry` — хранит параметры запуска, cap factor, схему управления, показатели телеметрии.
- `pallet_utbc_or_custom` — движок эмиссии, поддерживающий разные типы кривых и выдающий распределение долей при каждом mint.
- `pallet_pol_vault` — создает XYK-пулы, маркирует LP как POL, обеспечивает неизменяемость.
- `pallet_native_proxy` — мостит предложения в референдумы Native, отслеживает окна вето, управляет мультипликаторами.
- `pallet_voting_escrow` (опция) — простой контракт депозита/вывода SODT для управления.
- Hooks: `on_mint`, `on_proposal_created`, `on_proposal_passed`, `on_native_vote_result`, `on_timelock_expired`.

Все паллеты ДОЛЖНЫ публиковать ончейн-метрики (`floor_native`, `floor_sodt`, `pol_depth_native`, `treasury_locked`, `cap_utilization`).

---

## 11. Дорожная карта развертывания

| Фаза                               | Длительность | Можно ли параллелить?                                    |
| ---------------------------------- | ------------ | -------------------------------------------------------- |
| α (разработка паллет и аудит)      | 3–6 месяцев  | Да — аудит частично параллелится с финальной разработкой |
| β (пилот BLDR)                     | 6–12 месяцев | Нет — важно учесть уроки до масштабирования              |
| γ (масштабирование контрибьюторов) | 6–12 месяцев | Да — несколько SODAO могут стартовать одновременно       |
| δ (открытая сертификация)          | 3–6 месяцев  | Да — шаблоны и онбординг можно вести параллельно         |
| ε (оптимизация параметров)         | Постоянно    | Да — непрерывное улучшение в ходе работы                 |

**Минимальный горизонт**: 18–36 месяцев от старта до зрелой экосистемы с несколькими SODAO и телеметрически подтверждёнными процессами.

---

## 12. Открытые варианты и расширения

- **Кастомная логика эмиссии** — интеграция кривых beyond UTBC (например, экспоненциальные), при условии соблюдения маршрутизации в POL и cap-проверок.
- **Графики мультипликатора казны** — динамический `m(t)`, который убывает с ростом распределения community.
- **Cross-POL stacking** — возможность связывать POLDAO друг с другом, создавая взаимные полы, требующие дополнительных cap-ограничений.
- **Страховые vault** — опциональный общий резерв, финансируемый участниками POLDAO, для покрытия ошибок zap или governance-инцидентов.
- **Маркетплейсы инвойсов BLDR** — сторонние билдеры подают заявки на выполнение инвойсов; BLDR DAO одобряет и отслеживает их, превращая payroll в открытую биржу.

---

## Заключение

POLDAO расширяют парадигму UTBC+POL с ограниченным риском для экономик второго порядка. Замещая классические тимшеры прокси-правом голоса казны, система сохраняет неизменность POL, гарантирует право вето и позволяет билдерским командам работать уверенно. Сценарий BLDR демонстрирует, как единое POLDAO, поддерживаемое казной, может запустить целую экономику контрибьюторов, тогда как cap factor и вето Native обеспечивают безопасность всех будущих ветвей.

---

- **Версия**: 1.0.0
- **Дата**: Октябрь 2025
- **Лицензия**: MIT
